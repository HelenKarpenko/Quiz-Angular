<form 
  [formGroup]="loginForm" 
  novalidate 
  (ngSubmit)="login()"
  fxLayout="column wrap"
  fxLayoutAlign="center center"
  fxLayoutGap="10px">

  <mat-card class="login-card" *ngIf="!isAuthenticated">

    <div class="login-mat-card-header">
      <div class="login-title">Sign in</div>
      <a class="nav-link" [routerLink]="['/register']">Need an account?</a>
    </div>

    <mat-card-content>
      <div *ngIf="error" class="error-alert">
        <mat-icon>error</mat-icon>
        {{error}}
      </div>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>person</mat-icon>
        <input
          matInput 
          type="text"
          formControlName="username" 
          placeholder="Username"
          required>
        <mat-error *ngIf="hasError('username', 'required')" class='login-input'>Username is required</mat-error>
      </mat-form-field>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>lock</mat-icon>
        <input
          matInput 
          type="password"
          formControlName="password" 
          placeholder="Password">
        <mat-error *ngIf="hasError('password', 'required')" class='login-input'>Username is required</mat-error>
      </mat-form-field>
  
    </mat-card-content>
    <mat-card-actions align="center">
      <button 
        mat-raised-button 
        color="primary"
        type="submit"
        [disabled]="!loginForm.valid">Sign in</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="login-card" *ngIf="isAuthenticated">
    <div class="login-mat-card-header">
      You are already logged in!
    </div>
    <mat-card-actions align="center">
      <button 
        mat-raised-button 
        color="primary"
        type="button"
        (click)="logout()">
        Logout
      </button>
    </mat-card-actions>
  </mat-card>
</form>
