<form 
  [formGroup]="registerForm" 
  novalidate 
  (ngSubmit)="register()"
  fxLayout="column wrap"
  fxLayoutAlign="center center"
  fxLayoutGap="10px">

  <mat-card class="login-card" *ngIf="!isAuthenticated">

    <div class="login-mat-card-header">
      <div class="login-title">Sign up</div>
      <a class="nav-link" [routerLink]="['/register']">Have an account?</a>
    </div>

    <mat-card-content>
      <div *ngIf="errors" class="error-alert">
        <div *ngFor="let error of errors | keyvalue">
          <mat-icon>error</mat-icon>
          {{error.value}}
        </div>
      </div>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>email</mat-icon>
        <input
          matInput 
          type="email"
          formControlName="email" 
          placeholder="Email"
          required>
        <mat-error *ngIf="hasError('email', 'required')" class='login-input'>Email is required</mat-error>
      </mat-form-field>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>person</mat-icon>
        <input
          matInput 
          type="text"
          formControlName="userName" 
          placeholder="Username"
          required>
        <mat-error *ngIf="hasError('userName', 'required')" class='login-input'>Username is required</mat-error>
      </mat-form-field>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>lock</mat-icon>
        <input
          matInput 
          type="password"
          formControlName="password" 
          placeholder="Password">
        <mat-error *ngIf="hasError('password', 'required')" class='login-input'>Password is required</mat-error>
      </mat-form-field>

      <mat-form-field class="login-input" appearance="outline">
        <mat-icon matPrefix>lock</mat-icon>
        <input
          matInput 
          type="password"
          formControlName="confirmPassword" 
          placeholder="Confirm Password">
        <mat-error *ngIf="hasError('confirmPassword', 'required')" class='login-input'>Is required</mat-error>
      </mat-form-field>
  
    </mat-card-content>
    <mat-card-actions align="center">
      <button 
        mat-raised-button 
        color="primary"
        type="submit"
        [disabled]="!registerForm.valid">Sign up</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="login-card" *ngIf="isAuthenticated">
    <div class="login-mat-card-header">
      You are already logged in!
    </div>
    <mat-card-actions align="center">
      <button 
        mat-raised-button 
        color="primary"
        type="button"
        (click)="logout()">
        Logout
      </button>
    </mat-card-actions>
  </mat-card>
</form>
